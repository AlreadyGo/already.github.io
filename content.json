{"meta":{"title":"AlreadyGo","subtitle":null,"description":null,"author":"Hui Zhou","url":"https://alreadygo.github.io"},"pages":[{"title":"about","date":"2017-10-20T17:58:54.000Z","updated":"2019-10-10T11:48:38.203Z","comments":true,"path":"about/index.html","permalink":"https://alreadygo.github.io/about/index.html","excerpt":"","text":"just an ordinary coder …"},{"title":"tags","date":"2017-10-20T16:09:34.000Z","updated":"2019-10-10T11:48:38.227Z","comments":true,"path":"tags/index.html","permalink":"https://alreadygo.github.io/tags/index.html","excerpt":"","text":""},{"title":"相册","date":"2017-10-21T02:08:13.000Z","updated":"2019-10-10T11:48:38.203Z","comments":true,"path":"gallery/index.html","permalink":"https://alreadygo.github.io/gallery/index.html","excerpt":"","text":""}],"posts":[{"title":"HashMap","slug":"HashMap","date":"2019-12-05T10:21:48.000Z","updated":"2019-12-05T09:54:42.721Z","comments":true,"path":"2019/12/05/HashMap/","link":"","permalink":"https://alreadygo.github.io/2019/12/05/HashMap/","excerpt":"Q1：HashMap 的数据结构？ A1：哈希表结构（链表散列：数组+链表）实现，结合数组和链表的优点。当链表长度超过 8 时，链表转换为红黑树。 Q2：HashMap默认大小是多少？如果传入指定大小是20，那么实际大小是多少？ Q3：HashMap对key进行hash操作的时候有什么特殊处理吗？ Q4：put操作当发生hash碰撞，数据插入链表时，是插入链表头部还是尾部？ Q5：HashMap会出现死循环吗？ Q6：链表长度超过 8 时一定会转换成红黑树吗？","text":"Q1：HashMap 的数据结构？ A1：哈希表结构（链表散列：数组+链表）实现，结合数组和链表的优点。当链表长度超过 8 时，链表转换为红黑树。 Q2：HashMap默认大小是多少？如果传入指定大小是20，那么实际大小是多少？ Q3：HashMap对key进行hash操作的时候有什么特殊处理吗？ Q4：put操作当发生hash碰撞，数据插入链表时，是插入链表头部还是尾部？ Q5：HashMap会出现死循环吗？ Q6：链表长度超过 8 时一定会转换成红黑树吗？ 先贴一段简单的代码1234Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(20);for (int i = 0; i &lt; 20; i++) &#123; map.put(i, i);&#125; A2：默认大小是161234567891011121314151617181920212223242526272829303132n初始值是19n 10011n&gt;1 01001 11011n 11011n&gt;2 00110 11111n 11111n&gt;4 00001 11111-------------n初始值是20n 10100n&gt;1 01010 11110n 11110n&gt;2 00111 11111n 11111n&gt;4 00001 11111 tableSizeFor方法如果入参是2的整数幂则返回本身，如果不是则返回大于入参的最小整数幂，如果入参是20，实际返回值则为32为什么这么设计，是因为从Key映射到HashMap数组的对应位置，会用到一个Hash函数1index = HashCode（Key） &amp; （Length - 1） length取2的整数幂会让数据分布的更均匀 A3:1234static final int hash(Object key) &#123; int h; return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);&#125; 这个操作是把 key 的 hashCode 值与 hashCode 值右移 16 位做异或（不同为 1，相同为 0），这样就是把哈希值的高位和低位一起混合计算，这样就能使生成的 hash 值更离散，和A2中的作用是一样的 A4：HashMap在jdk1.7中采用头插入法，在扩容时会改变链表中元素原本的顺序，以至于在并发场景下导致链表成环的问题。而在jdk1.8中采用尾插入法，在扩容时会保持链表元素原本的顺序，就不会出现链表成环的问题了 总结一下HashMap1.7和1.8的变化： 1.7采用数组+单链表，1.8在单链表超过一定长度后改成红黑树存储 1.7扩容时需要重新计算哈希值和索引位置，1.8并不重新计算哈希值，巧妙地采用和扩容后容量进行&amp;操作来计算新的索引位置。 1.7插入元素到单链表中采用头插入法，1.8采用的是尾插入法。","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://alreadygo.github.io/tags/java/"}]},{"title":"线程池原理","slug":"阿里巴巴java手册中关于线程的说明","date":"2019-10-10T10:21:48.000Z","updated":"2019-11-26T12:06:03.603Z","comments":true,"path":"2019/10/10/阿里巴巴java手册中关于线程的说明/","link":"","permalink":"https://alreadygo.github.io/2019/10/10/阿里巴巴java手册中关于线程的说明/","excerpt":"阿里巴巴java手册中关于线程的说明1.【强制】创建线程或线程池时请指定有意义的线程名称，方便出错时回溯正例:1234public class TimerTaskThread extends Thread &#123; public TimerTaskThread() &#123; super.setName(\"TimerTaskThread\");... &#125;&#125;","text":"阿里巴巴java手册中关于线程的说明1.【强制】创建线程或线程池时请指定有意义的线程名称，方便出错时回溯正例:1234public class TimerTaskThread extends Thread &#123; public TimerTaskThread() &#123; super.setName(\"TimerTaskThread\");... &#125;&#125; 2.【强制】线程资源必须通过线程池提供，不允许在应用中自行显式创建线程。 说明:使用线程池的好处是减少在创建和销毁线程上所消耗的时间以及系统资源的开销，解决 资源不足的问题。如果不使用线程池，有可能造成系统创建大量同类线程而导致消耗完内存或 者“过度切换”的问题。3.【强制】线程池不允许使用 Executors 去创建，而是通过 ThreadPoolExecutor 的方式，这样的处理方式让写的同学更加明确线程池的运行规则，规避资源耗尽的风险。 说明:Executors 返回的线程池对象的弊端如下: FixedThreadPool 和 SingleThreadPool:允许的请求队列长度为 Integer.MAX_VALUE，可能会堆积大量的请求，从而导致 OOM。 CachedThreadPool 和 ScheduledThreadPool:允许的创建线程数量为 Integer.MAX_VALUE，可能会创建大量的线程，从而导致 OOM。 线程池原理参数及工作原理首先是创建线程的 api： 1ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue, RejectedExecutionHandler handler) 这几个核心参数的作用： corePoolSize 为线程池的基本大小。 maximumPoolSize 为线程池最大线程大小。 keepAliveTime 和 unit 则是线程空闲后的存活时间。 workQueue 用于存放任务的阻塞队列。 handler 当队列和最大线程池都满了之后的拒绝策略。 问题：1new ThreadPoolExecutor(10, 20,0L, TimeUnit.MILLISECONDS,new LinkedBlockingQueue&lt;Runnable&gt;()) maximumPoolSize=20会不会起作用？ 提交任务 当前线程数量小于 coreSize 时创建一个新的线程运行,即使有空闲线程。 当前线程数量大于 coreSize并且小于maximumPoolSize，会写入到队列中，只有当队列写满时才会继续创建新的线程 如果coreSize等于maximumPoolSize，那么创建的是一个固定大小的线程池 默认初始化的时候线程池中是没有线程的，只有当有新的任务提交的时候才会创建新线程，但是可以重写prestartCoreThread或者prestartAllCoreThreads方法，使得构造线程池的时候预先启动线程 新线程是通过ThreadFactory创建的 如果线程池里线程数超过corePoolSize，那么空闲时间超过keepAliveTime的线程会被终止掉，默认只会终止maximumPoolSize-coreSize那部分线程，allowCoreThreadTimeOut(true)可以使超时策略对核心线程同样起作用 当线程数超过maximumPoolSize的时候，会采用拒绝策略，jdk提供了几种通用的策略，默认策略，抛出RejectedExecutionException 12345/** * The default rejected execution handler */private static final RejectedExecutionHandler defaultHandler = new AbortPolicy(); 每个任务执行前后的钩子函数beforeExecute和afterExecute 具体看代码 关闭线程池 shutdown() 执行后停止接受新任务，会把队列的任务执行完毕。 shutdownNow() 也是停止接受新任务，但会中断所有的任务，将线程池状态变为 stop。 配置线程数1int cupNum = Runtime.getRuntime().availableProcessors(); 一般线程数配置核数的1-2倍 SpringBoot 使用线程池123456789101112131415@Configurationpublic class TreadPoolConfig &#123; /** * 消费队列线程 * @return */ @Bean(value = \"consumerQueueThreadPool\") public ExecutorService buildConsumerQueueThreadPool()&#123; ThreadFactory namedThreadFactory = new ThreadFactoryBuilder() .setNameFormat(\"consumer-queue-thread-%d\").build(); ExecutorService pool = new ThreadPoolExecutor(5, 5, 0L, TimeUnit.MILLISECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(5),namedThreadFactory,new ThreadPoolExecutor.AbortPolicy()); return pool ; &#125;&#125; 使用时： 123456789@Resource(name = \"consumerQueueThreadPool\")private ExecutorService consumerQueueThreadPool;@Overridepublic void execute() &#123; //消费队列 for (int i = 0; i &lt; 5; i++) &#123; consumerQueueThreadPool.execute(new ConsumerQueueThread()); &#125;&#125;","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://alreadygo.github.io/tags/java/"}]},{"title":"electron实现简单的爬虫客户端","slug":"electron实现简单的爬虫客户端","date":"2018-01-28T05:21:48.000Z","updated":"2019-11-26T12:11:33.601Z","comments":true,"path":"2018/01/28/electron实现简单的爬虫客户端/","link":"","permalink":"https://alreadygo.github.io/2018/01/28/electron实现简单的爬虫客户端/","excerpt":"下载客户端下载win客户端/绿色免安装 解压客户端压缩包","text":"下载客户端下载win客户端/绿色免安装 解压客户端压缩包 双击crawler-devTools.exe 在控制台执行代码 $toggleCrawlerLog(): 打印log showDevTool(): 调出控制台爬取微博明星分类下前100页数据微博链接在控制台执行以下代码:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263var config = [&#123; type: &quot;waitFor&quot;, selector: &quot;body .WB_miniblog .PCD_followlist&quot;, timeout: 30&#125;, &#123; type: &apos;script&apos;, async: true, timeout: 60, func: function(args, target, callback) &#123; new Promise(function(f) &#123; if (window.jQuery &amp;&amp; window.$) return f(0); var script = document.createElement(&quot;script&quot;); script.type = &quot;text/javascript&quot;; script.onload = f; script.src = &quot;//cdn.bootcss.com/jquery/2.1.4/jquery.min.js&quot;; document.body.appendChild(script); &#125;).then(() =&gt; &#123; var html = $(&apos;body .WB_miniblog&apos;); function transform(t) &#123; var r = []; t.find(&apos;dd.mod_info&apos;).each((i, v) =&gt; &#123; var o = &#123;&#125;, $t = $(v); o.name = $t.find(&apos;.info_name a strong&apos;).text(); o.url = $t.find(&apos;.info_name a&apos;).attr(&apos;href&apos;); o.connect = $t.find(&apos;.info_connect span:eq(0) .count&apos;).text(); o.fans = $t.find(&apos;.info_connect span:eq(1) .count&apos;).text(); o.weibo = $t.find(&apos;.info_connect span:eq(2) .count&apos;).text(); o.address = $t.find(&apos;.info_add span&apos;).text(); o.intro = $t.find(&apos;.info_intro span&apos;).text(); r.push(o) &#125;); return r; &#125; target.data = transform(html); target.cat = args.cat; callback(); &#125;); &#125;&#125;]let pool = new WebPagePool(5);let callback = data =&gt; &#123; if (!result[data.cat])result[data.cat]=[]; result[data.cat].push(...data.data);&#125;let result=&#123;&#125;;let cats = [&#123;&quot;url&quot;:&quot;https://d.weibo.com/1087030002_2975_1003_0&quot;,&quot;cat&quot;:&quot;明星&quot;,&quot;total&quot;:100&#125;];cats.forEach((cat)=&gt;&#123; let len = cat.total; for(var i=1;i&lt;len+1;i++)&#123; pool.submit(config,Object.assign(&#123;&#125;,cat,&#123;url:`$&#123;cat.url&#125;?page=$&#123;i&#125;`&#125;),callback) &#125;&#125;) 代码说明 均使用jq(sizzle)选择器 config: 对象数组, executor会按顺序执行爬取动作 waitFor: 等待$(‘body .WB_miniblog .PCD_followlist’)元素出现,超时时间30s script: 在页面上执行异步脚本, args(参数,执行任务中传入,其中{url}表示需要请求的链接), target(执行结果,最终会返回), callback(脚本执行完必须调用callback方法) 结果: 本例的结果均放入result变量中 WebPagePool: 页面池, 打开多个页面异步执行爬取任务let pool = new WebPagePool(5); 创建一个有五个页面的页面池 WebPagePool常用方法pool.submit(config,args,callback): config爬取配置,args爬取参数,callback回调方法(callback的参数就是script中的target)pool.queue: 等待执行的任务pool.failQueue: 失败的任务pool.failBack(): 失败任务全部重试pool.isOver(): 页面池的任务是否结束pool.close(): 销毁页面池","categories":[],"tags":[{"name":"js","slug":"js","permalink":"https://alreadygo.github.io/tags/js/"},{"name":"electron","slug":"electron","permalink":"https://alreadygo.github.io/tags/electron/"},{"name":"爬虫","slug":"爬虫","permalink":"https://alreadygo.github.io/tags/爬虫/"}]},{"title":"elasticsearch之cardinality浅析","slug":"elasticsearch之cardinality浅析","date":"2017-11-19T14:18:41.000Z","updated":"2019-11-27T05:25:46.562Z","comments":true,"path":"2017/11/19/elasticsearch之cardinality浅析/","link":"","permalink":"https://alreadygo.github.io/2017/11/19/elasticsearch之cardinality浅析/","excerpt":"引言大数据时代,类似sum求和或者avg平均值的操作还是相对容易,而比如类似算网站uv或者找出网站访问最频繁访客会比较困难,es中提供了一种cardinality聚合来解决这类问题.","text":"引言大数据时代,类似sum求和或者avg平均值的操作还是相对容易,而比如类似算网站uv或者找出网站访问最频繁访客会比较困难,es中提供了一种cardinality聚合来解决这类问题. 123456789101112131415161718curl -XGET &quot;http://localhost:9200/_search&quot; -d&apos;&#123; &quot;aggs&quot;: &#123; &quot;monthly&quot;: &#123; &quot;date_histogram&quot;: &#123; &quot;field&quot;: &quot;timestamp&quot;, &quot;interval&quot;: &quot;month&quot; &#125;, &quot;aggs&quot;: &#123; &quot;visitor_count&quot;: &#123; &quot;cardinality&quot;: &#123; &quot;field&quot;: &quot;ip_address&quot; &#125; &#125; &#125; &#125; &#125;&#125;&apos; 基数估算算法数据集小的时候,当然可以使用hashset,但是数据量过大的时候,内存使用就会很致命.传统的基数计数实现有两种,基于B树和基于bitmap,B树在问题在于不能高效合并,bitmap问题在于bitmap的长度与集合中元素个数无关，而是与基数的上限有关,例如“00100110”表示集合 {2，5，6}。bitmap中1的数量就是这个集合的基数,这两种方法在大数据场景下都会有内存问题.幸运的是,还有其他的基数计数算法.其中比较有名的就是linear counting和loglog counting,HyperLogLog lc算法LC的基本思路是：设有一哈希函数H，其哈希结果空间有m个值（最小值0，最大值m-1），并且哈希结果服从均匀分布。使用一个长度为m的bitmap，每个bit为一个桶，均初始化为0，设一个集合的基数为n，此集合所有元素通过H哈希到bitmap中，如果某一个元素被哈希到第k个比特并且第k个比特为0，则将其置为1。当集合所有元素哈希完成后，设bitmap中还有u个bit为0。则：n^=−mlogumn^=−mlogum为n的一个估计，且为最大似然估计（MLE）。12345678class LinearCounter &#123; BitSet mask = new BitSet(m) // m is a design parameter void add(value) &#123; int position = hash(value) // map the value to the range 0..m mask.set(position) // sets a bit in the mask to 1 &#125;&#125; 精度要求越高，则bitmap的长度越大。随着m和n的增大，m大约为n的十分之一。因此LC所需要的空间只有传统的bitmap直接映射方法的1/10. llc算法LLC的空间复杂度仅有O(log2(log2(Nmax)))，使得通过KB级内存估计数亿级别的基数成为可能.例如,假设基数的上限为1亿，原始bitmap方法需要12.5M内存，而LogLog Counting只需不到1K内存（640字节）就可以在标准误差不超过4%的精度下对基数进行估计,因此目前在处理大数据的基数计算问题时，所采用算法基本为LLC或其几个变种1234567891011121314151617class LogLogCounter &#123; int H // H is a design parameter int m = 2^k // k is a design parameter etype[] estimators = new etype[m] // etype is a design parameter void add(value) &#123; hashedValue = hash(value) bucket = getBits(hashedValue, 0, k) estimators[bucket] = max( estimators[bucket], rank( getBits(hashedValue, k, H) ) ) &#125; getBits(value, int start, int end) rank(value)&#125; 小结 它们都是基于hash而非数值 它们返回的结果都是近似值 linear counting作为一个早期的算法,空间复杂度并不优秀,在基数大的时候结果会很不准,很少单独使用 相比LC其最大的优势就是内存使用极少。不过LLC也有自己的问题，就是当n不是特别大时，其估计误差过大 HyperLogLog是一种结合LC和LLC的一种改进算法,可以用相对固定的内存估算任意大集合的计数 es中主要参考了google出品的HyperLogLog++算法,略有改动,在一定条件下,lc算法会升级到hll算法,详见es源码中org.elasticsearch.search.aggregations.metrics.cardinality.HyperLogLogPlusPlus类. 精度和内存为了节约内存,精度方面会有所牺牲.es提供了一个可配置的precision_threshold参数,来配置cardinality的精度,threshold参数的取值范围在0-4w,默认为3000,精度和内存的使用都与这个参数相关,假设precision_threshold为N,那么你期望每个分片每个聚合桶上的内存大约是8*N字节.源码中可以发现,precision_threshold会转化成precision精度,precision的取值范围在4-18,默认为14,也就是对应precision_threshold=30001234567891011/** * Compute the required precision so that &lt;code&gt;count&lt;/code&gt; distinct entries * would be counted with linear counting. */public static int precisionFromThreshold(long count) &#123; final long hashTableEntries = (long) Math.ceil(count / MAX_LOAD_FACTOR); int precision = PackedInts.bitsRequired(hashTableEntries * Integer.BYTES); precision = Math.max(precision, MIN_PRECISION); precision = Math.min(precision, MAX_PRECISION); return precision;&#125; 下面是一个相对精度丢失图:对于三种阈值,在不同基数下的精度丢失,可以发现就算阈值低至100,在百千万级别的数据量下.精度丢失也在5%以下","categories":[],"tags":[{"name":"elasticsearch","slug":"elasticsearch","permalink":"https://alreadygo.github.io/tags/elasticsearch/"},{"name":"cardinality","slug":"cardinality","permalink":"https://alreadygo.github.io/tags/cardinality/"}]},{"title":"elasticsearch.yml中重要的配置检查","slug":"elasticsearch-yml中重要的配置检查","date":"2017-11-13T12:33:27.000Z","updated":"2019-11-27T05:25:46.548Z","comments":true,"path":"2017/11/13/elasticsearch-yml中重要的配置检查/","link":"","permalink":"https://alreadygo.github.io/2017/11/13/elasticsearch-yml中重要的配置检查/","excerpt":"启动集群最小的配置 path.data 和 path.logs数据和日志文件路径123path: logs: /var/log/elasticsearch data: /var/data/elasticsearch 设置多个路径12345path: data: - /mnt/elasticsearch_1 - /mnt/elasticsearch_2 - /mnt/elasticsearch_3","text":"启动集群最小的配置 path.data 和 path.logs数据和日志文件路径123path: logs: /var/log/elasticsearch data: /var/data/elasticsearch 设置多个路径12345path: data: - /mnt/elasticsearch_1 - /mnt/elasticsearch_2 - /mnt/elasticsearch_3 cluster.name集群名1cluster.name: logging-prod node.name节点名1node.name: $&#123;HOSTNAME&#125; bootstrap.memory_lock锁定jvm只用内存,不使用硬盘1bootstrap.memory_lock:true network.host默认为127.0.0.112network.bind_host: 0.0.0.0 #监听所有ip的请求network.publish_host: _bond1:ipv4_ #发布给集群中其他节点知道的地址 discovery.zen.ping.unicast.hosts集群中其他节点ip:tcp端口,用来联系集群中其他节点1234discovery.zen.ping.unicast.hosts: - 192.168.1.10:9300 - 192.168.1.11 - seeds.mydomain.com discovery.zen.minimum_master_nodes最小主节点数目,为了防止脑裂,需要设置发现超过半数的主节点候选者才能组成集群1discovery.zen.minimum_master_nodes: 2","categories":[],"tags":[{"name":"elasticsearch","slug":"elasticsearch","permalink":"https://alreadygo.github.io/tags/elasticsearch/"},{"name":"es","slug":"es","permalink":"https://alreadygo.github.io/tags/es/"}]},{"title":"es集群启动系统配置检查","slug":"es集群启动系统配置检查","date":"2017-11-11T12:32:21.000Z","updated":"2019-11-27T05:25:46.552Z","comments":true,"path":"2017/11/11/es集群启动系统配置检查/","link":"","permalink":"https://alreadygo.github.io/2017/11/11/es集群启动系统配置检查/","excerpt":"堆大小检查./bin/elasticsearch文件1ES_HEAP_SIZE=20G ./conf/jvm.options12-Xms2g -Xmx2g 把xms(堆初始化大小)和xmx(最大堆大小)设为相等 堆太小oom,堆太大gc停止时间越长 xmx不要超过机器物理内存的50% 因为jvm使用压缩对象指针,不要把xmx设超过临界点,临界点一般在靠近32G,正确的日志如下:1heap size [1.9gb], compressed ordinary object pointers [true]","text":"堆大小检查./bin/elasticsearch文件1ES_HEAP_SIZE=20G ./conf/jvm.options12-Xms2g -Xmx2g 把xms(堆初始化大小)和xmx(最大堆大小)设为相等 堆太小oom,堆太大gc停止时间越长 xmx不要超过机器物理内存的50% 因为jvm使用压缩对象指针,不要把xmx设超过临界点,临界点一般在靠近32G,正确的日志如下:1heap size [1.9gb], compressed ordinary object pointers [true] 尽量保持在zero-based compressed oops临界点以下,大多数系统临界点在26G是安全的,有一些系统可以达到30G可以在启动es的时候加上XX:+UnlockDiagnosticVMOptions -XX:+PrintCompressedOopsMode两个jvm参数来检验下是否在临界点之下,会出现如下日志:1heap address: 0x000000011be00000, size: 27648 MB, zero based Compressed Oops 这段说明zero-based compressed oops生效了,而不是像这样:1heap address: 0x0000000118400000, size: 28672 MB, Compressed Oops with base: 0x00000001183ff000 open files 打开文件数 /max user processes 最大用户进程数/max locked memory jvm进程锁定到内存1234567891011121314151617[esadmin]$ ulimit -acore file size (blocks, -c) 0data seg size (kbytes, -d) unlimitedscheduling priority (-e) 0file size (blocks, -f) unlimitedpending signals (-i) 515100max locked memory (kbytes, -l) unlimitedmax memory size (kbytes, -m) unlimitedopen files (-n) 65535pipe size (512 bytes, -p) 8POSIX message queues (bytes, -q) 819200real-time priority (-r) 0stack size (kbytes, -s) 8192cpu time (seconds, -t) unlimitedmax user processes (-u) 65535virtual memory (kbytes, -v) unlimitedfile locks (-x) unlimited /etc/security/limits.conf中配置 检查mmap count至少26214412$ sysctl vm.max_map_countvm.max_map_count = 262144 在/etc/sysctl.conf中修改vm.max_map_count后,运行sysctl vm.max_map_count 检查插件没有head123456$ ./bin/plugin list - analysis-ik - delete-by-query - mapper-murmur3 - mapper-size - repository-hdfs","categories":[],"tags":[{"name":"elasticsearch","slug":"elasticsearch","permalink":"https://alreadygo.github.io/tags/elasticsearch/"},{"name":"es","slug":"es","permalink":"https://alreadygo.github.io/tags/es/"}]},{"title":"es模块配置-集群","slug":"es模块配置-集群","date":"2017-11-08T12:30:22.000Z","updated":"2019-11-27T05:25:46.531Z","comments":true,"path":"2017/11/08/es模块配置-集群/","link":"","permalink":"https://alreadygo.github.io/2017/11/08/es模块配置-集群/","excerpt":"配置分为static和dynamic两种,static配置在elasticsearch.yml,环境变量,或者在启动节点的命令行中;dynamic可以通过cluster-update-settings api动态更新.","text":"配置分为static和dynamic两种,static配置在elasticsearch.yml,环境变量,或者在启动节点的命令行中;dynamic可以通过cluster-update-settings api动态更新. 集群主节点主要功能之一是决定哪个分片分配到哪个节点,什么时候在节点间移动分片来平衡集群 分片分配配置cluster.routing.allocation.enable:all什么样的分片可以被分配 all primaries 仅分配主分片 new_primaries 仅分配新建索引的主分片 none 不允许分配分片cluster.routing.allocation.node_concurrent_recoveries:2一个节点上并发恢复分片的数目cluster.routing.allocation.node_initial_primaries_recoveries:4并发从本地磁盘恢复分片的数目cluster.routing.allocation.same_shard.host:false同一台机器有多个节点的时候,检查同一分片是否重复分配indices.recovery.concurrent_streams:3indices.recovery.concurrent_small_file_streams:2 分片平衡配置cluster.routing.rebalance.enable:all是否平衡分片 all primaries 仅平衡主分片 replicas 仅平衡副本分片 nonecluster.routing.allocation.allow_rebalance:indices_all_active什么时候允许平衡 always indices_primaries_active 当集群中所有的主分片都分配好了 indices_all_active 当集群中所有主分片和副本分片都分配好了cluster.routing.allocation.cluster_concurrent_rebalance:2集群允许并发平衡分片的数目 分片会被放在哪儿?不管平衡算法如何,forced awareness或者allocation filtering的优先级更高 cluster.routing.allocation.balance.shard:0.45f单个节点上分片分配的权重 cluster.routing.allocation.balance.index:0.55f单个节点每个索引分片数目的权重 cluster.routing.allocation.balance.threshold:1.0f平衡门槛,值越高越不积极去平衡分片 基于磁盘的分片分配cluster.routing.allocation.disk.threshold_enabled:true是否开启磁盘分配 cluster.routing.allocation.disk.watermark.low:85%磁盘检查低水位线,一旦磁盘使用率超过这个水位线,es将不会给该节点分配新的分片,可以设置百分比也可以设成绝对数值 cluster.routing.allocation.disk.watermark.high:90%磁盘检查高水位线,一旦结果超过这个水位线es会尝试把该节点上的分片重新分配到其他节点 cluster.info.update.interval:30s磁盘检查时间间隔 cluster.routing.allocation.disk.include_relocations:true当计算磁盘使用率的时候是否把正在重新分配的分片考虑进来 分片分配感应cluster.routing.allocation.awareness.force.zone.values: zone1,zone2正常的感应,如果一个zone联系不上其他zone,同一分片还是会分配到同一个zone上;配置了这个参数后,同一主分片和副本分片不允许分配到同一zone上 cluster.routing.allocation.awareness.attributes: rack_id,zone启动集群时,指定rack_id,当使用感应属性时,没有该属性的节点将不会被分配分片 ./bin/elasticsearch –node.rack_id rack_one 感应属性,可设多个值,逗号分隔,执行search或者get操作时,会优先搜索感应群组中的分片,这样通常会更快;当有多个机架时,es会移动分片来保证同一机架内不会存在同一索引的同一主副分片; 分片过滤cluster.routing.allocation.include.{attribute}分配索引到满足条件的节点(逗号分隔,至少满足一个) cluster.routing.allocation.require.{attribute}分配索引到满足条件的节点(逗号分隔,全部满足) cluster.routing.allocation.exclude.{attribute}分配索引到不满足条件的节点 attribute的取值,支持通配符 _name 节点名 _ip 节点ip _host 节点主机名其他集群配置cluster.blocks.read_only:false整个集群只可读,不能创建删除索引logger开头的配置用来管理日志,比如logger.indices.recovery","categories":[],"tags":[{"name":"elasticsearch","slug":"elasticsearch","permalink":"https://alreadygo.github.io/tags/elasticsearch/"},{"name":"es","slug":"es","permalink":"https://alreadygo.github.io/tags/es/"}]},{"title":"es集群滚动重启","slug":"es集群滚动重启","date":"2017-10-22T00:21:48.000Z","updated":"2019-11-27T05:25:46.565Z","comments":true,"path":"2017/10/22/es集群滚动重启/","link":"","permalink":"https://alreadygo.github.io/2017/10/22/es集群滚动重启/","excerpt":"禁止分片分配12345curl -XPUT &apos;/_cluster/settings?pretty&apos; -d &apos;&#123; &quot;transient&quot;: &#123; &quot;cluster.routing.allocation.enable&quot;: &quot;none&quot; &#125;&#125;&apos;","text":"禁止分片分配12345curl -XPUT &apos;/_cluster/settings?pretty&apos; -d &apos;&#123; &quot;transient&quot;: &#123; &quot;cluster.routing.allocation.enable&quot;: &quot;none&quot; &#125;&#125;&apos; 关闭单个节点关闭节点1$ kill &lt;pid&gt; 执行维护/升级等操作比如替换./plugins下某个文件夹,替换完成后执行./bin/plugin list 查看插件是否正常1scp esadmin@172.18.187.2:~/es-ik/elasticsearch-analysis-ik-1.9.3.zip ./ 重启节点1$ ./bin/elasticsearch -d 打开自动分配12345curl -XPUT &apos;/_cluster/settings?pretty&apos; -d &apos;&#123; &quot;transient&quot;: &#123; &quot;cluster.routing.allocation.enable&quot;: &quot;all&quot; &#125;&#125;&apos; 检查集群是否恢复完成active_shards_percent_as_number进度是100,负载中的分片relocating_shards,正在被初始化分片initializing_shards及为被分配的分片unassigned_shards等均为0时表示恢复完成1curl -XGET &apos;/_cluster/health?pretty&apos; files_percent,bytes_percent,translog_percent进度为100%时恢复完成1curl -XGET &apos;/_cat/recovery?v&amp;human&amp;active_only=true&amp;detailed=true&apos; 重复步骤1-5注意:检查allocation设置1curl -XGET &apos;/_cluster/settings?pretty&amp;filter_path=**.enable&apos;","categories":[],"tags":[{"name":"elasticsearch","slug":"elasticsearch","permalink":"https://alreadygo.github.io/tags/elasticsearch/"},{"name":"es","slug":"es","permalink":"https://alreadygo.github.io/tags/es/"}]},{"title":"hexo blog","slug":"blog","date":"2017-05-22T00:21:48.000Z","updated":"2019-11-27T05:33:00.232Z","comments":true,"path":"2017/05/22/blog/","link":"","permalink":"https://alreadygo.github.io/2017/05/22/blog/","excerpt":"安装 $ npm install hexo-cli -g 初始化 $ hexo init blog $ cd blog","text":"安装 $ npm install hexo-cli -g 初始化 $ hexo init blog $ cd blog 下载依赖 $ npm i 修改配置文件_config.yml1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283# Hexo Configuration## Docs: https://hexo.io/docs/configuration.html## Source: https://github.com/hexojs/hexo # 自定义网站标题,作者,语言(跟主题有关),我这边主题支持zh-Hans简体中文title: AlreadyGosubtitle:description:author: Hui Zhoulanguage: zh-Hanstimezone:## 自定义urlurl: http://alreadygo.github.ioroot: /permalink: :year/:month/:day/:title/permalink_defaults:# Directory source为源码目录,public为生成物目录source_dir: sourcepublic_dir: publictag_dir: tagsarchive_dir: archivescategory_dir: categoriescode_dir: downloads/codei18n_dir: :langskip_render:# Writingnew_post_name: :title.md # File name of new postsdefault_layout: posttitlecase: false # Transform title into titlecaseexternal_link: true # Open external links in new tabfilename_case: 0render_drafts: falsepost_asset_folder: falserelative_link: falsefuture: truehighlight: enable: true line_number: true auto_detect: false tab_replace: # Home page setting# path: Root path for your blogs index page. (default = &apos;&apos;)# per_page: Posts displayed per page. (0 = disable pagination)# order_by: Posts order. (Order by date descending by default)index_generator: path: &apos;&apos; per_page: 10 order_by: -date # Category &amp; Tagdefault_category: uncategorizedcategory_map:tag_map:# Date / Time format## Hexo uses Moment.js to parse and display date## You can customize the date format as defined in## http://momentjs.com/docs/#/displaying/format/date_format: YYYY-MM-DDtime_format: HH:mm:ss# Pagination## Set per_page to 0 to disable paginationper_page: 10pagination_dir: page# Extensions## Plugins: https://hexo.io/plugins/## https://github.com/iissnan/hexo-theme-nexttheme: next# Deployment## Docs: https://hexo.io/docs/deployment.html### npm i hexo-deployer-git --save#### 修改自定义部署git仓库及分支deploy: type: git repo: https://github.com/AlreadyGo/alreadyGo.github.io.git branch: master 安装next主题 $ mkdir themes/next$ curl -s https://api.github.com/repos/iissnan/hexo-theme-next/releases/latest | grep tarball_url | cut -d ‘“‘ -f 4 | wget -i - -O- | tar -zx -C themes/next –strip-components=1 生成static文件 $ hexo generate 删除static文件 $ hexo clean 在本地运行 $ hexo server 部署到github $ hexo deploy 常见插件安装https://hexo.io/plugins/这边安装了几个: $ npm i hexo-deployer-git –save //git部署 $ npm i hexo-wordcount –save //post字数统计 $ npm i hexo-generator-searchd –save //本地搜索 阅读更多的截断可以使用：1&lt;!-- more --&gt; themes/next/_config.yml:12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697989910010110210310410510610710810911011111211311411511611711811912012112212312412512612712812913013113213313413513613713813914014114214314414514614714814915015115215315415515615715815916016116216316416516616716816917017117217317417517617717817918018118218318418518618718818919019119219319419519619719819920020120220320420520620720820921021121221321421521621721821922022122222322422522622722822923023123223323423523623723823924024124224324424524624724824925025125225325425525625725825926026126226326426526626726826927027127227327427527627727827928028128228328428528628728828929029129229329429529629729829930030130230330430530630730830931031131231331431531631731831932032132232332432532632732832933033133233333433533633733833934034134234334434534634734834935035135235335435535635735835936036136236336436536636736836937037137237337437537637737837938038138238338438538638738838939039139239339439539639739839940040140240340440540640740840941041141241341441541641741841942042142242342442542642742842943043143243343443543643743843944044144244344444544644744844945045145245345445545645745845946046146246346446546646746846947047147247347447547647747847948048148248348448548648748848949049149249349449549649749849950050150250350450550650750850951051151251351451551651751851952052152252352452552652752852953053153253353453553653753853954054154254354454554654754854955055155255355455555655755855956056156256356456556656756856957057157257357457557657757857958058158258358458558658758858959059159259359459559659759859960060160260360460560660760860961061161261361461561661761861962062162262362462562662762862963063163263363463563663763863964064164264364464564664764864965065165265365465565665765865966066166266366466566666766866967067167267367467567667767867968068168268368468568668768868969069169269369469569669769869970070170270370470570670770870971071171271371471571671771871972072172272372472572672772872973073173273373473573673773873974074174274374474574674774874975075175275375475575675775875976076176276376476576676776876977077177277377477577677777877978078178278378478578678778878979079179279379479579679779879980080180280380480580680780880981081181281381481581681781881982082182282382482582682782882983083183283383483583683783883984084184284384484584684784884985085185285385485585685785885986086186286386486586686786886987087187287387487587687787887988088188288388488588688788888989089189289389489589689789889990090190290390490590690790890991091191291391491591691791891992092192292392492592692792892993093193293393493593693793893994094194294394494594694794894995095195295395495595695795895996096196296396496596696796896997097197297397497597697797897998098198298398498598698798898999099199299399499599699799899910001001100210031004100510061007100810091010101110121013101410151016101710181019102010211022102310241025102610271028102910301031103210331034# ---------------------------------------------------------------# Theme Core Configuration Settings# See: https://theme-next.org/docs/theme-settings/# ---------------------------------------------------------------# If false, merge configs from `_data/next.yml` into default configuration (rewrite).# If true, will fully override default configuration by options from `_data/next.yml` (override). Only for NexT settings.# And if true, all config from default NexT `_config.yml` must be copied into `next.yml`. Use if you know what you are doing.# Useful if you want to comment some options from NexT `_config.yml` by `next.yml` without editing default config.override: false# Console reminder if new version released.reminder: false# Allow to cache content generation. Introduced in NexT v6.0.0.cache: enable: true# Remove unnecessary files after hexo generate.minify: false# Define custom file paths.# Create your custom files in site directory `source/_data` and uncomment needed files below.custom_file_path: #head: source/_data/head.swig #header: source/_data/header.swig #sidebar: source/_data/sidebar.swig #postMeta: source/_data/post-meta.swig #postBodyEnd: source/_data/post-body-end.swig #footer: source/_data/footer.swig #bodyEnd: source/_data/body-end.swig #variable: source/_data/variables.styl #mixin: source/_data/mixins.styl #style: source/_data/styles.styl# ---------------------------------------------------------------# Site Information Settings# See: https://theme-next.org/docs/getting-started/# ---------------------------------------------------------------favicon: small: /images/favicon-16x16-next.png medium: /images/favicon-32x32-next.png apple_touch_icon: /images/apple-touch-icon-next.png safari_pinned_tab: /images/logo.svg #android_manifest: /images/manifest.json #ms_browserconfig: /images/browserconfig.xml# hexo-generator-feed required for rss support. Leave rss as blank to use site&apos;s feed link.# Set rss to false to disable feed link. Set rss to specific value if you have burned your feed already.rss: falsefooter: # Specify the date when the site was setup. If not defined, current year will be used. #since: 2015 # Icon between year and copyright info. icon: # Icon name in Font Awesome. See: https://fontawesome.com/v4.7.0/icons/ # `heart` is recommended with animation in red (#ff0000). name: user # If you want to animate the icon, set it to true. animated: false # Change the color of icon, using Hex Code. color: &quot;#808080&quot; # If not defined, `author` from Hexo `_config.yml` will be used. copyright: powered: # Hexo link (Powered by Hexo). enable: false # Version info of Hexo after Hexo link (vX.X.X). version: false theme: # Theme &amp; scheme info link (Theme - NexT.scheme). enable: false # Version info of NexT after scheme info (vX.X.X). version: false # Beian ICP and gongan information for Chinese users. See: http://www.beian.miit.gov.cn, http://www.beian.gov.cn beian: enable: false icp: # The digit in the num of gongan beian. gongan_id: # The full num of gongan beian. gongan_num: # The icon for gongan beian. See: http://www.beian.gov.cn/portal/download gongan_icon_url:# Creative Commons 4.0 International License.# See: https://creativecommons.org/share-your-work/licensing-types-examples# Available values of license: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero# You can set a language value if you prefer a translated version of CC license, e.g. deed.zh# CC licenses are available in 39 languages, you can find the specific and correct abbreviation you need on https://creativecommons.orgcreative_commons: license: by-nc-sa sidebar: false post: false language:# ---------------------------------------------------------------# Scheme Settings# ---------------------------------------------------------------# Schemesscheme: Muse#scheme: Mist#scheme: Pisces#scheme: Gemini# ---------------------------------------------------------------# Menu Settings# ---------------------------------------------------------------# Usage: `Key: /link/ || icon`# Key is the name of menu item. If the translation for this item is available, the translated text will be loaded, otherwise the Key name will be used. Key is case-senstive.# Value before `||` delimiter is the target link, value after `||` delimiter is the name of Font Awesome icon.# When running the site in a subdirectory (e.g. yoursite.com/blog), remove the leading slash from link value (/archives -&gt; archives).# External url should start with http:// or https://menu: home: / || home about: /about/ || user tags: /tags/ || tags #categories: /categories/ || th archives: /archives/ || archive #schedule: /schedule/ || calendar #sitemap: /sitemap.xml || sitemap #commonweal: /404/ || heartbeat# Enable / Disable menu icons / item badges.menu_settings: icons: true badges: false# ---------------------------------------------------------------# Sidebar Settings# See: https://theme-next.org/docs/theme-settings/sidebar# ---------------------------------------------------------------sidebar: # Sidebar Position. position: right #position: right # Manual define the sidebar width. If commented, will be default for: # Muse | Mist: 320 # Pisces | Gemini: 240 #width: 300 # Sidebar Display (only for Muse | Mist), available values: # - post expand on posts automatically. Default. # - always expand for all pages automatically. # - hide expand only when click on the sidebar toggle icon. # - remove totally remove sidebar including sidebar toggle. display: post # Sidebar offset from top menubar in pixels (only for Pisces | Gemini). offset: 12 # Enable sidebar on narrow view (only for Muse | Mist). onmobile: false# Sidebar Avataravatar: # Replace the default image and set the url here. url: #/images/avatar.gif # If true, the avatar will be dispalyed in circle. rounded: false # If true, the avatar will be rotated with the cursor. rotated: false# Posts / Categories / Tags in sidebar.site_state: true# Social Links# Usage: `Key: permalink || icon`# Key is the link label showing to end users.# Value before `||` delimiter is the target permalink, value after `||` delimiter is the name of Font Awesome icon.social: GitHub: https://github.com/alreadygo || github #E-Mail: mailto:yourname@gmail.com || envelope #Weibo: https://weibo.com/yourname || weibo #Google: https://plus.google.com/yourname || google #Twitter: https://twitter.com/yourname || twitter #FB Page: https://www.facebook.com/yourname || facebook #VK Group: https://vk.com/yourname || vk #StackOverflow: https://stackoverflow.com/yourname || stack-overflow #YouTube: https://youtube.com/yourname || youtube #Instagram: https://instagram.com/yourname || instagram #Skype: skype:yourname?call|chat || skypesocial_icons: enable: true icons_only: false transition: false# Blog rollslinks_settings: icon: link title: Links # Available values: block | inline layout: blocklinks: #Title: http://yoursite.com# Table of Contents in the Sidebar# Front-matter variable (unsupport wrap expand_all).toc: enable: true # Automatically add list number to toc. number: true # If true, all words will placed on next lines if header width longer then sidebar width. wrap: false # If true, all level of TOC in a post will be displayed, rather than the activated part of it. expand_all: false # Maximum heading depth of generated toc. max_depth: 6# A button to open designated chat widget in sidebar.# Firstly, you need enable the chat service you want to activate its sidebar button.chat: enable: false #service: chatra #service: tidio icon: comment # Icon name in Font Awesome, set false to disable icon. text: Chat # Button text, change it as you wish.# ---------------------------------------------------------------# Post Settings# See: https://theme-next.org/docs/theme-settings/posts# ---------------------------------------------------------------# Automatically excerpt description in homepage as preamble text.excerpt_description: true# Read more button# If true, the read more button will be displayed in excerpt section.read_more_btn: true# Post meta display settingspost_meta: item_text: true created_at: true updated_at: enable: true another_day: true categories: true# Post wordcount display settings# Dependencies: https://github.com/theme-next/hexo-symbols-count-timesymbols_count_time: separated_meta: true item_text_post: true item_text_total: false awl: 4 wpm: 275# Use icon instead of the symbol # to indicate the tag at the bottom of the posttag_icon: false# Reward (Donate)# Front-matter variable (unsupport animation).reward_settings: # If true, reward will be displayed in every article by default. enable: false animation: false #comment: Donate comment here.reward: #wechatpay: /images/wechatpay.png #alipay: /images/alipay.png #bitcoin: /images/bitcoin.png# Related popular posts# Dependencies: https://github.com/tea3/hexo-related-popular-postsrelated_posts: enable: false title: # Custom header, leave empty to use the default one display_in_home: false params: maxCount: 5 #PPMixingRate: 0.0 #isDate: false #isImage: false #isExcerpt: false# Post edit# Dependencies: https://github.com/hexojs/hexo-deployer-gitpost_edit: enable: false url: https://github.com/user-name/repo-name/tree/branch-name/subdirectory-name # Link for view source #url: https://github.com/user-name/repo-name/edit/branch-name/subdirectory-name # Link for fork &amp; edit# Show previous post and next post in post footer if exists# Available values: left | right | falsepost_navigation: left# ---------------------------------------------------------------# Custom Page Settings# See: https://theme-next.org/docs/theme-settings/custom-pages# ---------------------------------------------------------------# TagCloud settings for tags page.tagcloud: # All values below are same as default, change them by yourself. min: 12 # Minimun font size in px max: 30 # Maxium font size in px start: &quot;#ccc&quot; # Start color (hex, rgba, hsla or color keywords) end: &quot;#111&quot; # End color (hex, rgba, hsla or color keywords) amount: 200 # Amount of tags, change it if you have more than 200 tags# Google Calendar# Share your recent schedule to others via calendar page.calendar: calendar_id: &lt;required&gt; # Your Google account E-Mail api_key: &lt;required&gt; orderBy: startTime offsetMax: 24 # Time Range offsetMin: 4 # Time Range showDeleted: false singleEvents: true maxResults: 250# ---------------------------------------------------------------# Misc Theme Settings# ---------------------------------------------------------------# Set the text alignment in posts / pages.text_align: # Available values: start | end | left | right | center | justify | justify-all | match-parent desktop: justify mobile: justify# Reduce padding / margin indents on devices with narrow width.mobile_layout_economy: false# Android Chrome header panel color ($brand-bg / $headband-bg =&gt; $black-deep).android_chrome_color: &quot;#222&quot;# Hide sticky headers and color the menu bar on Safari (iOS / macOS).safari_rainbow: false# Custom Logo (Do not support scheme Mist)custom_logo: #/uploads/custom-logo.jpgcodeblock: # Code Highlight theme # Available values: normal | night | night eighties | night blue | night bright | solarized | solarized dark | galactic # See: https://github.com/chriskempson/tomorrow-theme highlight_theme: normal # Add copy button on codeblock copy_button: enable: false # Show text copy result. show_result: false # Available values: default | flat | mac style:back2top: enable: true # Back to top in sidebar. sidebar: false # Scroll percent label in b2t button. scrollpercent: false# Reading progress barreading_progress: enable: false # Available values: top | bottom position: top color: &quot;#37c6c0&quot; height: 3px# Bookmark Supportbookmark: enable: false # Customize the color of the bookmark. color: &quot;#222&quot; # If auto, save the reading progress when closing the page or clicking the bookmark-icon. # If manual, only save it by clicking the bookmark-icon. save: auto# `Follow me on GitHub` banner in the top-right corner.github_banner: enable: true permalink: https://github.com/yourname title: Follow me on GitHub# ---------------------------------------------------------------# Font Settings# See: https://theme-next.org/docs/theme-settings/#Fonts-Customization# ---------------------------------------------------------------# Find fonts on Google Fonts (https://www.google.com/fonts)# All fonts set here will have the following styles:# light | light italic | normal | normal italic | bold | bold italic# Be aware that setting too much fonts will cause site running slowly# ---------------------------------------------------------------# To avoid space between header and sidebar in scheme Pisces / Gemini, Web Safe fonts are recommended for `global` (and `title`):# Arial | Tahoma | Helvetica | Times New Roman | Courier New | Verdana | Georgia | Palatino | Garamond | Comic Sans MS | Trebuchet MS# ---------------------------------------------------------------font: enable: false # Uri of fonts host, e.g. //fonts.googleapis.com (Default). host: # Font options: # `external: true` will load this font family from `host` above. # `family: Times New Roman`. Without any quotes. # `size: x.x`. Use `em` as unit. Default: 1 (16px) # Global font settings used for all elements inside &lt;body&gt;. global: external: true family: Lato size: # Font settings for site title (.site-title). title: external: true family: size: # Font settings for headlines (&lt;h1&gt; to &lt;h6&gt;). headings: external: true family: size: # Font settings for posts (.post-body). posts: external: true family: # Font settings for &lt;code&gt; and code blocks. codes: external: true family:# ---------------------------------------------------------------# SEO Settings# ---------------------------------------------------------------# Disable Baidu transformation on mobile devices.disable_baidu_transformation: false# Set a canonical link tag for your Hexo site.# See: https://support.google.com/webmasters/answer/139066# Remember to set up your URL in Hexo `_config.yml` (e.g. url: http://yoursite.com)canonical: true# Change headers hierarchy on site-subtitle (will be main site description) and on all post / page titles for better SEO-optimization.seo: false# If true, site-subtitle will be added to index page.# Remember to set up your site-subtitle in Hexo `_config.yml` (e.g. subtitle: Subtitle)index_with_subtitle: false# Automatically add external URL with Base64 encrypt &amp; decrypt.exturl: false# Google Webmaster tools verification.# See: https://www.google.com/webmastersgoogle_site_verification:# Bing Webmaster tools verification.# See: https://www.bing.com/webmasterbing_site_verification:# Yandex Webmaster tools verification.# See: https://webmaster.yandex.ruyandex_site_verification:# Baidu Webmaster tools verification.# See: https://ziyuan.baidu.com/sitebaidu_site_verification:# Enable baidu push so that the blog will push the url to baidu automatically which is very helpful for SEO.baidu_push: false# ---------------------------------------------------------------# Third Party Plugins &amp; Services Settings# See: https://theme-next.org/docs/third-party-services/# You may need to install dependencies or set CDN URLs in `vendors`# There are two different CDN providers by default:# - jsDelivr (cdn.jsdelivr.net), works everywhere even in China# - CDNJS (cdnjs.cloudflare.com), provided by cloudflare# ---------------------------------------------------------------# Math Formulas Render Supportmath: # Default (true) will load mathjax / katex script on demand. # That is it only render those page which has `mathjax: true` in Front-matter. # If you set it to false, it will load mathjax / katex srcipt EVERY PAGE. per_page: true # hexo-renderer-pandoc (or hexo-renderer-kramed) required for full MathJax support. mathjax: enable: false # See: https://mhchem.github.io/MathJax-mhchem/ mhchem: false # hexo-renderer-markdown-it-plus (or hexo-renderer-markdown-it with markdown-it-katex plugin) required for full Katex support. katex: enable: false # See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex copy_tex: false# Easily enable fast Ajax navigation on your website.# Dependencies: https://github.com/theme-next/theme-next-pjaxpjax: false# FancyBox is a tool that offers a nice and elegant way to add zooming functionality for images.# For more information: https://fancyapps.com/fancyboxfancybox: false# A JavaScript library for zooming images like Medium.# Do not enable both `fancybox` and `mediumzoom`.# For more information: https://github.com/francoischalifour/medium-zoommediumzoom: false# Vanilla JavaScript plugin for lazyloading images.# For more information: https://github.com/ApoorvSaxena/lozad.jslazyload: false# Pangu Support# For more information: https://github.com/vinta/pangu.jspangu: false# Quicklink Support# For more information: https://github.com/GoogleChromeLabs/quicklink# Front-matter (unsupport home archive).quicklink: enable: false # Home page and archive page can be controlled through home and archive options below. # This configuration item is independent of `enable`. home: false archive: false # Default (true) will initialize quicklink after the load event fires. delay: true # Custom a time in milliseconds by which the browser must execute prefetching. timeout: 3000 # Default (true) will enable fetch() or falls back to XHR. priority: true # For more flexibility you can add some patterns (RegExp, Function, or Array) to ignores. # See: https://github.com/GoogleChromeLabs/quicklink#custom-ignore-patterns ignores:# ---------------------------------------------------------------# Comments Settings# See: https://theme-next.org/docs/third-party-services/comments# ---------------------------------------------------------------# Multiple Comment System Supportcomments: # Available values: tabs | buttons style: tabs # Choose a comment system to be displayed by default. # Available values: changyan | disqus | disqusjs | gitalk | livere | valine active: # Setting `true` means remembering the comment system selected by the visitor. storage: true # Modify texts or order for any navs, here are some examples. nav: #disqus: # text: Load Disqus # order: -1 #gitalk: # order: -2# Disqusdisqus: enable: false shortname: count: true lazyload: false #post_meta_order: 0# DisqusJS# Alternative Disqus - Render comment component using Disqus API.# Demo: https://suka.js.org/DisqusJS/# For more information: https://github.com/SukkaW/DisqusJSdisqusjs: enable: false # API Endpoint of Disqus API (https://disqus.com/api/). # Leave api empty if you are able to connect to Disqus API. # Otherwise you need a reverse proxy for Disqus API. # For example: # api: https://disqus.skk.moe/disqus/ api: apikey: # Register new application from https://disqus.com/api/applications/ shortname: # See: https://disqus.com/admin/settings/general/# Changyanchangyan: enable: false appid: appkey: #post_meta_order: 0# Valine# You can get your appid and appkey from https://leancloud.cn# For more information: https://valine.js.org, https://github.com/xCss/Valinevaline: enable: false # When enable is set to be true, leancloud_visitors is recommended to be closed for the re-initialization problem within different leancloud adk version appid: # Your leancloud application appid appkey: # Your leancloud application appkey notify: false # Mail notifier. See: https://github.com/xCss/Valine/wiki verify: false # Verification code placeholder: Just go go # Comment box placeholder avatar: mm # Gravatar style guest_info: nick,mail,link # Custom comment header pageSize: 10 # Pagination size language: # Language, available values: en, zh-cn visitor: false # leancloud-counter-security is not supported for now. When visitor is set to be true, appid and appkey are recommended to be the same as leancloud_visitors&apos; for counter compatibility. Article reading statistic https://valine.js.org/visitor.html comment_count: true # If false, comment count will only be displayed in post page, not in home page recordIP: false # Whether to record the commenter IP serverURLs: # When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in) #post_meta_order: 0# LiveRe comments system# You can get your uid from https://livere.com/insight/myCode (General web site)livere_uid: # &lt;your_uid&gt;# Gitalk# Demo: https://gitalk.github.io# For more information: https://github.com/gitalk/gitalkgitalk: enable: false github_id: # GitHub repo owner repo: # Repository name to store issues client_id: # GitHub Application Client ID client_secret: # GitHub Application Client Secret admin_user: # GitHub repo owner and collaborators, only these guys can initialize gitHub issues distraction_free_mode: true # Facebook-like distraction free mode # Gitalk&apos;s display language depends on user&apos;s browser or system environment # If you want everyone visiting your site to see a uniform language, you can set a force language value # Available values: en | es-ES | fr | ru | zh-CN | zh-TW language:# ---------------------------------------------------------------# Post Widgets &amp; Content Sharing Services# See: https://theme-next.org/docs/third-party-services/post-widgets# ---------------------------------------------------------------# Star rating support to each article.# To get your ID visit https://widgetpack.comrating: enable: false id: # &lt;app_id&gt; color: fc6423# AddThis Share. See: https://www.addthis.com# Go to https://www.addthis.com/dashboard to customize your tools.add_this_id:# ---------------------------------------------------------------# Statistics and Analytics# See: https://theme-next.org/docs/third-party-services/statistics-and-analytics# ---------------------------------------------------------------# Google Analyticsgoogle_analytics: tracking_id: # &lt;app_id&gt; # By default, NexT will load an external gtag.js script on your site. # If you only need the pageview feature, set the following option to true to get a better performance. only_pageview: false# Baidu Analyticsbaidu_analytics: # &lt;app_id&gt;# Growingio Analyticsgrowingio_analytics: # &lt;project_id&gt;# CNZZ countcnzz_siteid:# Show number of visitors to each article.# You can visit https://leancloud.cn to get AppID and AppKey.leancloud_visitors: enable: false app_id: # &lt;app_id&gt; app_key: # &lt;app_key&gt; # Dependencies: https://github.com/theme-next/hexo-leancloud-counter-security # If you don&apos;t care about security in leancloud counter and just want to use it directly # (without hexo-leancloud-counter-security plugin), set `security` to `false`. security: true betterPerformance: false# Another tool to show number of visitors to each article.# Visit https://console.firebase.google.com/u/0/ to get apiKey and projectId.# Visit https://firebase.google.com/docs/firestore/ to get more information about firestore.firestore: enable: false collection: articles # Required, a string collection name to access firestore database apiKey: # Required projectId: # Required# Show Views / Visitors of the website / page with busuanzi.# Get more information on http://ibruce.info/2015/04/04/busuanzibusuanzi_count: enable: false total_visitors: true total_visitors_icon: user total_views: true total_views_icon: eye post_views: true post_views_icon: eye# ---------------------------------------------------------------# Search Services# See: https://theme-next.org/docs/third-party-services/search-services# ---------------------------------------------------------------# Algolia Search# For more information: https://www.algolia.comalgolia_search: enable: false hits: per_page: 10 labels: input_placeholder: Search for Posts hits_empty: &quot;We didn&apos;t find any results for the search: $&#123;query&#125;&quot; hits_stats: &quot;$&#123;hits&#125; results found in $&#123;time&#125; ms&quot;# Local Search# Dependencies: https://github.com/theme-next/hexo-generator-searchdblocal_search: enable: false # If auto, trigger search by changing input. # If manual, trigger search by pressing enter key or search button. trigger: auto # Show top n results per article, show all results by setting to -1 top_n_per_article: 1 # Unescape html strings to the readable one. unescape: false # Preload the search data when the page loads. preload: false# Swiftype Search API Keyswiftype_key:# ---------------------------------------------------------------# Chat Services# See: https://theme-next.org/docs/third-party-services/chat-services# ---------------------------------------------------------------# Chatra Support# See: https://chatra.io# Dashboard: https://app.chatra.io/settings/generalchatra: enable: false async: true id: # Visit Dashboard to get your ChatraID #embed: # Unfinished experimental feature for developers. See: https://chatra.io/help/api/#injectto# Tidio Support# See: https://www.tidiochat.com# Dashboard: https://www.tidiochat.com/panel/dashboardtidio: enable: false key: # Public Key, get it from dashboard. See: https://www.tidiochat.com/panel/settings/developer# ---------------------------------------------------------------# Tags Settings# See: https://theme-next.org/docs/tag-plugins/# ---------------------------------------------------------------# Note tag (bs-callout)note: # Note tag style values: # - simple bs-callout old alert style. Default. # - modern bs-callout new (v2-v3) alert style. # - flat flat callout style with background, like on Mozilla or StackOverflow. # - disabled disable all CSS styles import of note tag. style: simple icons: false border_radius: 3 # Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6). # Offset also applied to label tag variables. This option can work with disabled note tag. light_bg_offset: 0# Tabs tagtabs: transition: tabs: false labels: true border_radius: 0# PDF tag, requires two plugins: pdfObject and pdf.js# pdfObject will try to load pdf files natively, if failed, pdf.js will be used.# The following `cdn` setting is only for pdfObject, because cdn for pdf.js might be blocked by CORS policy.# So, you must install the dependency of pdf.js if you want to use pdf tag and make it available to all browsers.# See: https://github.com/theme-next/theme-next-pdfpdf: enable: false # Default height height: 500px# Mermaid tagmermaid: enable: false # Available themes: default | dark | forest | neutral theme: forest# ---------------------------------------------------------------# Animation Settings# ---------------------------------------------------------------# Use velocity to animate everything.# For more information: http://velocityjs.orgmotion: enable: true async: false transition: # Transition variants: # fadeIn | flipXIn | flipYIn | flipBounceXIn | flipBounceYIn # swoopIn | whirlIn | shrinkIn | expandIn # bounceIn | bounceUpIn | bounceDownIn | bounceLeftIn | bounceRightIn # slideUpIn | slideDownIn | slideLeftIn | slideRightIn # slideUpBigIn | slideDownBigIn | slideLeftBigIn | slideRightBigIn # perspectiveUpIn | perspectiveDownIn | perspectiveLeftIn | perspectiveRightIn post_block: fadeIn post_header: slideDownIn post_body: slideDownIn coll_header: slideLeftIn # Only for Pisces | Gemini. sidebar: slideUpIn# Progress bar in the top during page loading.# Dependencies: https://github.com/theme-next/theme-next-pace# For more information: https://github.com/HubSpot/pacepace: enable: false # Themes list: # big-counter | bounce | barber-shop | center-atom | center-circle | center-radar | center-simple # corner-indicator | fill-left | flat-top | flash | loading-bar | mac-osx | material | minimal theme: minimal# JavaScript 3D library.# Dependencies: https://github.com/theme-next/theme-next-threethree: enable: false three_waves: false canvas_lines: false canvas_sphere: false# Canvas-nest# Dependencies: https://github.com/theme-next/theme-next-canvas-nest# For more information: https://github.com/hustcc/canvas-nest.jscanvas_nest: enable: false onmobile: true # Display on mobile or not color: &quot;0,0,255&quot; # RGB values, use `,` to separate opacity: 0.5 # The opacity of line: 0~1 zIndex: -1 # z-index property of the background count: 99 # The number of lines# Canvas-ribbon# Dependencies: https://github.com/theme-next/theme-next-canvas-ribbon# For more information: https://github.com/zproo/canvas-ribboncanvas_ribbon: enable: false size: 300 # The width of the ribbon alpha: 0.6 # The transparency of the ribbon zIndex: -1 # The display level of the ribbon#! ---------------------------------------------------------------#! DO NOT EDIT THE FOLLOWING SETTINGS#! UNLESS YOU KNOW WHAT YOU ARE DOING#! See: https://theme-next.org/docs/advanced-settings#! ---------------------------------------------------------------# Script Vendors. Set a CDN address for the vendor you want to customize.# Be aware that you would better use the same version as internal ones to avoid potential problems.# Remember to use the https protocol of CDN files when you enable https on your site.vendors: # Internal path prefix. _internal: lib # Internal version: 3.1.0 # anime: //cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js anime: # Internal version: 4.7.0 # fontawesome: //cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css # fontawesome: //cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css fontawesome: # MathJax # mathjax: //cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML # mathjax: //cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML # mhchem: //cdn.jsdelivr.net/npm/mathjax-mhchem@3 # mhchem: //cdnjs.cloudflare.com/ajax/libs/mathjax-mhchem/3.3.0 mathjax: mhchem: # KaTeX # katex: //cdn.jsdelivr.net/npm/katex@0/dist/katex.min.css # katex: //cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css # copy_tex_js: //cdn.jsdelivr.net/npm/katex@0/dist/contrib/copy-tex.min.js # copy_tex_css: //cdn.jsdelivr.net/npm/katex@0/dist/contrib/copy-tex.min.css katex: copy_tex_js: copy_tex_css: # Internal version: 0.2.8 # pjax: //cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js pjax: # FancyBox # jquery: //cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js # fancybox: //cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js # fancybox_css: //cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css jquery: fancybox: fancybox_css: # Medium-zoom # mediumzoom: //cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js mediumzoom: # Lazyload # lazyload: //cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js # lazyload: //cdnjs.cloudflare.com/ajax/libs/lozad.js/1.9.0/lozad.min.js lazyload: # Pangu # pangu: //cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js # pangu: //cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js pangu: # Quicklink # quicklink: //cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js quicklink: # DisqusJS # disqusjs_js: //cdn.jsdelivr.net/npm/disqusjs@1/dist/disqus.js # disqusjs_css: //cdn.jsdelivr.net/npm/disqusjs@1/dist/disqusjs.css disqusjs_js: disqusjs_css: # Valine # valine: //cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js # valine: //cdnjs.cloudflare.com/ajax/libs/valine/1.3.10/Valine.min.js valine: # Gitalk # gitalk_js: //cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js # gitalk_css: //cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css gitalk_js: gitalk_css: # Algolia Search # algolia_instant_js: //cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.js # algolia_instant_css: //cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css algolia_instant_js: algolia_instant_css: # PDF # pdfobject: //cdn.jsdelivr.net/npm/pdfobject@2/pdfobject.min.js # pdfobject: //cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js pdfobject: # Mermaid # mermaid: //cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js # mermaid: //cdnjs.cloudflare.com/ajax/libs/mermaid/8.3.0/mermaid.min.js mermaid: # Internal version: 1.2.1 # velocity: //cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js # velocity: //cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.min.js # velocity_ui: //cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js # velocity_ui: //cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.ui.min.js velocity: velocity_ui: # Internal version: 1.0.2 # pace: //cdn.jsdelivr.net/npm/pace-js@1/pace.min.js # pace: //cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js # pace_css: //cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css # pace_css: //cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-minimal.min.css pace: pace_css: # Internal version: 1.0.0 # three: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/three.min.js # three_waves: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/three-waves.min.js # canvas_lines: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/canvas_lines.min.js # canvas_sphere: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/canvas_sphere.min.js three: three_waves: canvas_lines: canvas_sphere: # Internal version: 1.0.0 # canvas_nest: //cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js # canvas_nest_nomobile: //cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest-nomobile.min.js canvas_nest: canvas_nest_nomobile: # Internal version: 1.0.0 # canvas_ribbon: //cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-ribbon@1/canvas-ribbon.js canvas_ribbon:# Assetscss: cssjs: jsimages: images","categories":[],"tags":[{"name":"hexo","slug":"hexo","permalink":"https://alreadygo.github.io/tags/hexo/"},{"name":"blog","slug":"blog","permalink":"https://alreadygo.github.io/tags/blog/"}]},{"title":"shaowsocks","slug":"shaowsocks","date":"2017-03-21T02:53:15.000Z","updated":"2020-02-02T15:21:06.578Z","comments":true,"path":"2017/03/21/shaowsocks/","link":"","permalink":"https://alreadygo.github.io/2017/03/21/shaowsocks/","excerpt":"本脚本适用环境系统支持：CentOS，Debian，Ubuntu内存要求：≥128M关于本脚本一键安装 ShadowsocksR 服务端。请下载与之配套的客户端程序来连接。（以下客户端只有 Windows 客户端和 Python 版客户端可以使用 SSR 新特性，其他原版客户端只能以兼容的方式连接 SSR 服务器） 默认配置服务器端口：自己设定（如不设定，默认为 8989）客户端端口：1080密码：自己设定（如不设定，默认为teddysun.com）","text":"本脚本适用环境系统支持：CentOS，Debian，Ubuntu内存要求：≥128M关于本脚本一键安装 ShadowsocksR 服务端。请下载与之配套的客户端程序来连接。（以下客户端只有 Windows 客户端和 Python 版客户端可以使用 SSR 新特性，其他原版客户端只能以兼容的方式连接 SSR 服务器） 默认配置服务器端口：自己设定（如不设定，默认为 8989）客户端端口：1080密码：自己设定（如不设定，默认为teddysun.com） 客户端下载 windows mac os linux android 使用方法使用root用户登录，运行以下命令 wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.sh chmod +x shadowsocksR.sh ./shadowsocksR.sh 2&gt; 1 | tee shadowsocksR.log 安装完成后，脚本提示如下 Congratulations, ShadowsocksR install completed! Server IP:your_server_ip Server Port:your_server_port Password:your_password Local IP:127.0.0.1 Local Port:1080 Protocol:origin obfs:plain Encryption Method:aes-256-cfb Welcome to visit:https://shadowsocks.be/9.html If you want to change protocol &amp;amp; obfs, reference URL: https://github.com/breakwa11/shadowsocks-rss/wiki/Server-Setup Enjoy it! 卸载方法使用 root 用户登录，运行以下命令： ./shadowsocksR.sh uninstall 查看运行状态 /etc/init.d/shadowsocks status 可以查看 ShadowsocksR 进程是否已经启动。本脚本安装完成后，已将 ShadowsocksR 自动加入开机自启动。 使用命令 启动：/etc/init.d/shadowsocks start 停止：/etc/init.d/shadowsocks stop 重启：/etc/init.d/shadowsocks restart 状态：/etc/init.d/shadowsocks status 配置文件路径：/etc/shadowsocks.json日志文件路径：/var/log/shadowsocks.log代码安装目录：/usr/local/shadowsocks多用户配置 sample： { &quot;server&quot;:&quot;0.0.0.0&quot;, &quot;server_ipv6&quot;: &quot;[::]&quot;, &quot;local_address&quot;:&quot;127.0.0.1&quot;, &quot;local_port&quot;:1080, &quot;port_password&quot;:{ &quot;8989&quot;:&quot;password1&quot;, &quot;8990&quot;:&quot;password2&quot;， &quot;8991&quot;:&quot;password3&quot; }, &quot;timeout&quot;:300, &quot;method&quot;:&quot;aes-256-cfb&quot;, &quot;protocol&quot;: &quot;origin&quot;, &quot;protocol_param&quot;: &quot;&quot;, &quot;obfs&quot;: &quot;plain&quot;, &quot;obfs_param&quot;: &quot;&quot;, &quot;redirect&quot;: &quot;&quot;, &quot;dns_ipv6&quot;: false, &quot;fast_open&quot;: false, &quot;workers&quot;: 1 } 如果你想修改配置文件，请参考：https://github.com/breakwa11/shadowsocks-rss/wiki/Server-Setup 参考链接 https://github.com/breakwa11/shadowsocks-rss","categories":[],"tags":[{"name":"shadowsocks","slug":"shadowsocks","permalink":"https://alreadygo.github.io/tags/shadowsocks/"},{"name":"breakwall","slug":"breakwall","permalink":"https://alreadygo.github.io/tags/breakwall/"}]},{"title":"设置npm代理","slug":"设置npm代理","date":"2017-01-21T17:07:17.000Z","updated":"2019-11-27T05:25:46.559Z","comments":true,"path":"2017/01/22/设置npm代理/","link":"","permalink":"https://alreadygo.github.io/2017/01/22/设置npm代理/","excerpt":"配置镜像by config command npm config set registry http://registry.cnpmjs.org npm info underscore （如果上面配置正确这个命令会有字符串response） 命令行指定 npm –registry http://registry.cnpmjs.org info underscore 编辑 ~/.npmrc 加入下面内容 registry = http://registry.cnpmjs.org","text":"配置镜像by config command npm config set registry http://registry.cnpmjs.org npm info underscore （如果上面配置正确这个命令会有字符串response） 命令行指定 npm –registry http://registry.cnpmjs.org info underscore 编辑 ~/.npmrc 加入下面内容 registry = http://registry.cnpmjs.org 设置代理 npm config set proxy http://server:port npm config set https-proxy http://server:port 如果需要认证的话可以这样设置： npm config set proxy http://username:password@server:portnpm confit set https-proxy http://username:password@server:port 如果代理不支持https的话需要修改npm存放package的网站地址。 npm config set registry “http://registry.npmjs.org/&quot; 使用nrm快速切换npm源 nrm 是一个 NPM 源管理器，允许你快速地在如下 NPM 源间切换 列表项目 npm cnpm strongloop enropean australia nodejitsu taobao Install sudo npm install -g nrm 列出可用的源： ~ nrm ls npm —- https://registry.npmjs.org/ cnpm — http://r.cnpmjs.org/ taobao - http://registry.npm.taobao.org/ eu —– http://registry.npmjs.eu/ au —– http://registry.npmjs.org.au/ sl —– http://npm.strongloop.com/ nj —– https://registry.nodejitsu.com/ pt —– http://registry.npmjs.pt/ 切换： ~ nrm use taobao Registry has been set to: http://registry.npm.taobao.org/ 增加源： nrm add [home] 删除源： nrm del 测试速度： nrm test","categories":[],"tags":[{"name":"js","slug":"js","permalink":"https://alreadygo.github.io/tags/js/"},{"name":"npm","slug":"npm","permalink":"https://alreadygo.github.io/tags/npm/"}]},{"title":"linux下安装mysql常见问题","slug":"linux下安装mysql常见问题","date":"2017-01-20T17:07:17.000Z","updated":"2019-11-27T05:25:46.569Z","comments":true,"path":"2017/01/21/linux下安装mysql常见问题/","link":"","permalink":"https://alreadygo.github.io/2017/01/21/linux下安装mysql常见问题/","excerpt":"1.无法远程连接mysql 1130 GRANT ALL PRIVILEGES ON . TO ‘myuser‘@’%’ IDENTIFIED BY ‘mypassword’ WITH GRANT OPTION;","text":"1.无法远程连接mysql 1130 GRANT ALL PRIVILEGES ON . TO ‘myuser‘@’%’ IDENTIFIED BY ‘mypassword’ WITH GRANT OPTION; 2.服务端中文乱码 [mysqld] character_set_server=utf8 service mysql restart 此时, mysql -u root -pstatus 会有类似的结果:Server characterset: utf8","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://alreadygo.github.io/tags/mysql/"},{"name":"linux","slug":"linux","permalink":"https://alreadygo.github.io/tags/linux/"}]}]}